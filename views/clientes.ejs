<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciar Clientes</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo"></div>
        <a href="/agendamentos/principal">Agendamentos</a>
        <p class="AbaAtual">Clientes</p>
        <a href="/servicos/servicos">Serviços</a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="navbar">
            <div class="logo">Painel de Agendamentos</div>
            <div class="menu">
                <a href="#" id="abrirModalCliente">Adicionar Cliente</a>
            </div>
        </div>

        <!-- Modal de Adicionar/Editar Cliente -->
        <div id="modalCliente" class="modal">
            <div class="modal-content">
                <span id="fecharModalCliente">&times;</span>
                <form id="formCliente">
                    <input type="hidden" id="clienteId" name="clienteId">
                    <label for="nome_completo">Nome do Cliente:</label>
                    <input type="text" id="nome_completo" name="nome_completo" required>
                
                    <label for="cpf">CPF:</label>
                    <input type="text" id="cpf" name="cpf" required>
                
                    <label for="data_nascimento">Data de Nascimento:</label>
                    <input type="date" id="data_nascimento" name="data_nascimento" required>
                
                    <label for="endereco">Endereço:</label>
                    <input type="text" id="endereco" name="endereco" required>
                
                    <label for="telefone_fixo">Telefone Fixo:</label>
                    <input type="text" id="telefone_fixo" name="telefone_fixo" required>
                
                    <label for="celular">Celular:</label>
                    <input type="text" id="celular" name="celular" required>
                
                    <label for="email">E-mail:</label>
                    <input type="email" id="email" name="email" required>
                
                    <button type="submit">Salvar</button>
                </form>
            </div>
        </div>



<!-- Lista de Clientes -->
<div class="total-container" id="total-container">
    <h2 class="container-title">Clientes Registrados</h2>
    <!-- Campo de Pesquisa -->
<div><input type="text" id="pesquisaClientes" placeholder="Pesquisar clientes..."></div>
<div class="card-container" id="clientes-container">
    <% clientes.forEach(function(cliente) { %>
        <div class="card cliente-card" id="cliente-<%= cliente.id %>">
            <h5 class="titulo"><%= cliente.nome_completo %></h5>
            <div class="conteudo">
                <p><strong>CPF:</strong> <%= cliente.cpf %></p>
                
                <!-- Formatação da data de nascimento -->
                <p><strong>Nascimento:</strong> 
                    <%= new Date(cliente.data_nascimento).toLocaleDateString('pt-BR', { year: '2-digit', month: '2-digit', day: '2-digit' }) %>
                </p>
                <p><strong>Endereço:</strong> <%= cliente.endereco %></p>
                <p><strong>Telefone Fixo:</strong> <%= cliente.telefone_fixo %></p>
                <p><strong>Celular:</strong> <%= cliente.celular %></p>
                <p><strong>E-mail:</strong> <%= cliente.email %></p>
            </div>
            <div class="card-buttons">
                <button class="editarCliente" 
                        data-id="<%= cliente.id %>" 
                        data-nome_completo="<%= cliente.nome_completo %>" 
                        data-cpf="<%= cliente.cpf %>" 
                        data-data_nascimento="<%= cliente.data_nascimento %>" 
                        data-endereco="<%= cliente.endereco %>" 
                        data-telefone_fixo="<%= cliente.telefone_fixo %>" 
                        data-celular="<%= cliente.celular %>" 
                        data-email="<%= cliente.email %>">Editar</button>
                <button class="excluirCliente" data-id="<%= cliente.id %>">Excluir</button>
            </div>
        </div>
    <% }); %>
</div>
</div>
    
        <!-- Mensagem de Sucesso -->
        <div id="mensagemSucesso" class="alert" style="display: none;"></div>
    </div>

    <script src="/js/clientes.js"></script>
</body>
</html>
